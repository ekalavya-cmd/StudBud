{"ast":null,"code":"var _jsxFileName = \"D:\\\\Final Project\\\\study-buddy-planner\\\\src\\\\components\\\\Layout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { BookOpen } from \"lucide-react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSun, faMoon, faWater, faFire, faLeaf } from \"@fortawesome/free-solid-svg-icons\";\nimport Dashboard from \"./Dashboard\";\nimport TaskManager from \"./TaskManager\";\nimport Analytics from \"./Analytics\";\nimport Rewards from \"./Rewards\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Layout() {\n  _s();\n  const [activeTab, setActiveTab] = useState(\"dashboard\");\n  const [tasks, setTasks] = useState([]);\n  const [studyStats, setStudyStats] = useState({\n    totalHours: 0,\n    completedTasks: 0,\n    streak: 0,\n    lastActiveDate: null,\n    lastStreakUpdate: null,\n    studyHoursLog: []\n  });\n  const [aiSuggestion, setAiSuggestion] = useState(\"\");\n  const [points, setPoints] = useState(0);\n  const [badges, setBadges] = useState([]);\n  const [currentTheme, setCurrentTheme] = useState(\"Light Mode\");\n  const [unlockedThemes, setUnlockedThemes] = useState([\"Light Mode\"]); // Default to Light Mode only\n  const [loading, setLoading] = useState(true);\n  const userId = \"user123\";\n\n  // Theme styles for all themes\n  const themeStyles = {\n    \"Light Mode\": \"bg-slate-50 text-gray-800\",\n    \"Dark Mode\": \"bg-gray-800 text-gray-200\",\n    \"Ocean Breeze\": \"bg-gradient-to-br from-blue-100 to-teal-200 text-blue-900\",\n    \"Sunset Glow\": \"bg-gradient-to-br from-orange-100 to-pink-200 text-orange-900\",\n    \"Forest Whisper\": \"bg-gradient-to-br from-green-100 to-teal-200 text-green-900\"\n  };\n  const headerStyles = {\n    \"Light Mode\": \"bg-indigo-600 text-white\",\n    \"Dark Mode\": \"bg-indigo-900 text-gray-200\",\n    \"Ocean Breeze\": \"bg-blue-600 text-white\",\n    \"Sunset Glow\": \"bg-orange-600 text-white\",\n    \"Forest Whisper\": \"bg-green-600 text-white\"\n  };\n  const navStyles = {\n    \"Light Mode\": \"bg-white text-gray-500\",\n    \"Dark Mode\": \"bg-gray-700 text-gray-300\",\n    \"Ocean Breeze\": \"bg-blue-200 text-blue-700\",\n    \"Sunset Glow\": \"bg-orange-200 text-orange-700\",\n    \"Forest Whisper\": \"bg-green-200 text-green-700\"\n  };\n\n  // Map themes to their FontAwesome icons\n  const themeIcons = {\n    \"Light Mode\": faSun,\n    \"Dark Mode\": faMoon,\n    \"Ocean Breeze\": faWater,\n    \"Sunset Glow\": faFire,\n    \"Forest Whisper\": faLeaf\n  };\n\n  // Handle theme change when clicking an icon\n  const handleThemeChange = theme => {\n    if (unlockedThemes.includes(theme)) {\n      setCurrentTheme(theme);\n      toast.info(`🎨 Switched to ${theme}!`);\n    }\n  };\n\n  // Callbacks for Rewards.jsx\n  const handlePointsUpdate = newPoints => {\n    setPoints(newPoints);\n  };\n  const handleThemeUnlock = themeName => {\n    if (!unlockedThemes.includes(themeName)) {\n      setUnlockedThemes([...unlockedThemes, themeName]);\n    }\n  };\n\n  // Function to update streak\n  const updateStreak = today => {\n    setStudyStats(prev => {\n      const lastActive = prev.lastActiveDate ? new Date(prev.lastActiveDate) : null;\n      const lastStreakUpdate = prev.lastStreakUpdate ? new Date(prev.lastStreakUpdate) : null;\n      const todayDate = new Date(today);\n      let newStreak = prev.streak;\n      let newLastActiveDate = today;\n      let newLastStreakUpdate = prev.lastStreakUpdate;\n      if (!lastActive || lastActive.toISOString().split(\"T\")[0] !== today) {\n        if (lastActive) {\n          const diffTime = todayDate - lastActive;\n          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n          if (diffDays === 1) {\n            newStreak = prev.streak + 1;\n            newLastStreakUpdate = today;\n          } else if (diffDays > 1) {\n            newStreak = 1;\n            newLastStreakUpdate = today;\n          }\n        } else {\n          newStreak = 1;\n          newLastStreakUpdate = today;\n        }\n      }\n      if (lastStreakUpdate && new Date(lastStreakUpdate).toISOString().split(\"T\")[0] !== today) {\n        const diffTime = todayDate - new Date(lastStreakUpdate);\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        if (diffDays > 1) {\n          newStreak = 1;\n          newLastStreakUpdate = today;\n        }\n      }\n      const newStats = {\n        ...prev,\n        streak: newStreak,\n        lastActiveDate: newLastActiveDate,\n        lastStreakUpdate: newLastStreakUpdate,\n        studyHoursLog: prev.studyHoursLog || []\n      };\n      console.log(\"Updated studyStats (updateStreak):\", newStats);\n      return newStats;\n    });\n  };\n\n  // Fetch user data from backend on mount\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        var _data$studyStats, _data$studyStats2, _data$studyStats3, _data$studyStats4, _data$studyStats5, _data$studyStats6;\n        const response = await fetch(`http://localhost:5000/api/user/${userId}`);\n        if (!response.ok) {\n          throw new Error(`Failed to fetch user data: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(\"Fetched data:\", data);\n        setTasks(data.tasks || []);\n        const fetchedStats = {\n          totalHours: ((_data$studyStats = data.studyStats) === null || _data$studyStats === void 0 ? void 0 : _data$studyStats.totalHours) || 0,\n          completedTasks: ((_data$studyStats2 = data.studyStats) === null || _data$studyStats2 === void 0 ? void 0 : _data$studyStats2.completedTasks) || 0,\n          streak: ((_data$studyStats3 = data.studyStats) === null || _data$studyStats3 === void 0 ? void 0 : _data$studyStats3.streak) || 0,\n          lastActiveDate: ((_data$studyStats4 = data.studyStats) === null || _data$studyStats4 === void 0 ? void 0 : _data$studyStats4.lastActiveDate) || null,\n          lastStreakUpdate: ((_data$studyStats5 = data.studyStats) === null || _data$studyStats5 === void 0 ? void 0 : _data$studyStats5.lastStreakUpdate) || null,\n          studyHoursLog: ((_data$studyStats6 = data.studyStats) === null || _data$studyStats6 === void 0 ? void 0 : _data$studyStats6.studyHoursLog) || []\n        };\n        console.log(\"Setting initial studyStats:\", fetchedStats);\n        setStudyStats(fetchedStats);\n        setPoints(data.points || 0);\n        setBadges(data.badges || []);\n        setCurrentTheme(data.currentTheme || \"Light Mode\");\n        setUnlockedThemes(data.unlockedThemes || [\"Light Mode\"]); // Load unlocked themes\n\n        // Update streak\n        const today = new Date().toISOString().split(\"T\")[0];\n        console.log(\"Today's date:\", today);\n        const {\n          lastActiveDate,\n          streak,\n          lastStreakUpdate\n        } = fetchedStats;\n        let newStats = {\n          ...fetchedStats\n        };\n        if (lastStreakUpdate !== today) {\n          if (!lastActiveDate) {\n            console.log(\"No lastActiveDate, initializing with today's date...\");\n            newStats = {\n              ...fetchedStats,\n              lastActiveDate: today,\n              lastStreakUpdate: today,\n              studyHoursLog: fetchedStats.studyHoursLog || []\n            };\n          } else {\n            const lastDate = new Date(lastActiveDate);\n            const currentDate = new Date(today);\n            const diffDays = (currentDate - lastDate) / (1000 * 60 * 60 * 24);\n            console.log(\"Days difference:\", diffDays);\n            if (diffDays === 1) {\n              newStats = {\n                ...fetchedStats,\n                streak: fetchedStats.streak + 1,\n                lastActiveDate: today,\n                lastStreakUpdate: today,\n                studyHoursLog: fetchedStats.studyHoursLog || []\n              };\n              console.log(\"Updated studyStats (increment streak):\", newStats);\n            } else if (diffDays > 1) {\n              newStats = {\n                ...fetchedStats,\n                streak: 0,\n                lastActiveDate: today,\n                lastStreakUpdate: today,\n                studyHoursLog: fetchedStats.studyHoursLog || []\n              };\n              console.log(\"Updated studyStats (reset streak):\", newStats);\n            } else {\n              newStats = {\n                ...fetchedStats,\n                lastStreakUpdate: today,\n                studyHoursLog: fetchedStats.studyHoursLog || []\n              };\n              console.log(\"Updated studyStats (same day):\", newStats);\n            }\n          }\n          setStudyStats(newStats);\n        } else {\n          console.log(\"Streak already updated today, skipping...\");\n        }\n\n        // Check if this fetch is likely due to a server restart\n        const lastFetchTimestamp = localStorage.getItem(\"lastFetchTimestamp\");\n        const currentTimestamp = Date.now();\n        localStorage.setItem(\"lastFetchTimestamp\", currentTimestamp.toString());\n\n        // If there's no last fetch timestamp (first load ever) or if the data indicates a server restart\n        // (e.g., streak reset or significant time gap), show the toast\n        const lastActive = fetchedStats.lastActiveDate ? new Date(fetchedStats.lastActiveDate).getTime() : 0;\n        const timeSinceLastFetch = lastFetchTimestamp ? currentTimestamp - parseInt(lastFetchTimestamp) : Infinity;\n        const timeSinceLastActive = lastActive ? currentTimestamp - lastActive : Infinity;\n\n        // Show toast if this is the first fetch OR if the server data indicates a restart\n        // (e.g., no recent activity or streak reset)\n        if (!lastFetchTimestamp ||\n        // First load ever\n        timeSinceLastFetch > 60000 && timeSinceLastActive > 60000 ||\n        // No recent fetch or activity (1 minute threshold)\n        fetchedStats.streak === 0 && fetchedStats.totalHours === 0 // Data reset (indicative of server restart)\n        ) {\n          toast.success(\"Progress saved successfully!\", {\n            autoClose: 2000\n          });\n        }\n\n        // Set initial AI suggestion based on new conditions\n        setTimeout(() => {\n          const incompleteTasks = (data.tasks || []).filter(task => !task.completed);\n          if (incompleteTasks.length === 0) {\n            setAiSuggestion(\"You have no incomplete tasks! Add a new task to keep progressing.\");\n            return;\n          }\n          const todayStr = new Date().toISOString().split(\"T\")[0];\n          const priorityValue = {\n            High: 3,\n            Medium: 2,\n            Low: 1\n          };\n\n          // Categorize tasks\n          const tasksDueToday = [];\n          const pastDueTasks = [];\n          const futureTasks = [];\n          incompleteTasks.forEach(task => {\n            const taskDueDateStr = task.dueDate;\n            const diffDays = (new Date(taskDueDateStr) - new Date(todayStr)) / (1000 * 60 * 60 * 24);\n            if (taskDueDateStr === todayStr) {\n              tasksDueToday.push(task);\n            } else if (diffDays < 0) {\n              pastDueTasks.push({\n                ...task,\n                dueDateDiff: Math.abs(diffDays)\n              });\n            } else {\n              futureTasks.push({\n                ...task,\n                dueDateDiff: diffDays\n              });\n            }\n          });\n\n          // Sort tasks within each category\n          tasksDueToday.sort((a, b) => priorityValue[b.priority] - priorityValue[a.priority]);\n          pastDueTasks.sort((a, b) => {\n            if (a.dueDateDiff !== b.dueDateDiff) {\n              return a.dueDateDiff - b.dueDateDiff;\n            }\n            return priorityValue[b.priority] - priorityValue[a.priority];\n          });\n          futureTasks.sort((a, b) => {\n            if (a.dueDateDiff !== b.dueDateDiff) {\n              return a.dueDateDiff - b.dueDateDiff;\n            }\n            return priorityValue[b.priority] - priorityValue[a.priority];\n          });\n\n          // Apply prioritization rules for AI suggestion\n          let recommendedTask = null;\n\n          // Rule 1: Prioritize today's task with highest priority\n          if (tasksDueToday.length > 0) {\n            recommendedTask = tasksDueToday[0];\n          }\n          // Rule 2: If no tasks today, favor past-due task with highest priority\n          else if (pastDueTasks.length > 0) {\n            recommendedTask = pastDueTasks[0];\n          }\n          // Rule 3: If only future tasks remain, favor the one with highest priority\n          else if (futureTasks.length > 0) {\n            recommendedTask = futureTasks[0];\n          }\n          if (recommendedTask) {\n            setAiSuggestion(`Based on your schedule and learning patterns, I recommend focusing on your \"${recommendedTask.title}\" today.`);\n          } else {\n            setAiSuggestion(\"You have no incomplete tasks! Add a new task to keep progressing.\");\n          }\n        }, 1000);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching user data:\", err);\n        toast.error(\"Failed to load user data. Using defaults.\");\n        setTasks([{\n          id: 1,\n          title: \"Complete Math Assignment\",\n          dueDate: \"2025-04-25\",\n          priority: \"High\",\n          subject: \"Math\",\n          completed: false,\n          completedDate: null\n        }, {\n          id: 2,\n          title: \"Review Chemistry Notes\",\n          dueDate: \"2025-04-23\",\n          priority: \"Medium\",\n          subject: \"Science\",\n          completed: true,\n          completedDate: \"2025-04-23\"\n        }, {\n          id: 3,\n          title: \"Research Paper Outline\",\n          dueDate: \"2025-04-30\",\n          priority: \"High\",\n          subject: \"English\",\n          completed: false,\n          completedDate: null\n        }]);\n\n        // Set initial AI suggestion for default tasks\n        setTimeout(() => {\n          const defaultIncompleteTasks = [{\n            id: 1,\n            title: \"Complete Math Assignment\",\n            dueDate: \"2025-04-25\",\n            priority: \"High\",\n            subject: \"Math\",\n            completed: false,\n            completedDate: null\n          }, {\n            id: 2,\n            title: \"Review Chemistry Notes\",\n            dueDate: \"2025-04-23\",\n            priority: \"Medium\",\n            subject: \"Science\",\n            completed: true,\n            completedDate: \"2025-04-23\"\n          }, {\n            id: 3,\n            title: \"Research Paper Outline\",\n            dueDate: \"2025-04-30\",\n            priority: \"High\",\n            subject: \"English\",\n            completed: false,\n            completedDate: null\n          }].filter(task => !task.completed);\n          const todayStr = new Date().toISOString().split(\"T\")[0];\n          const priorityValue = {\n            High: 3,\n            Medium: 2,\n            Low: 1\n          };\n          const tasksDueToday = [];\n          const pastDueTasks = [];\n          const futureTasks = [];\n          defaultIncompleteTasks.forEach(task => {\n            const taskDueDateStr = task.dueDate;\n            const diffDays = (new Date(taskDueDateStr) - new Date(todayStr)) / (1000 * 60 * 60 * 24);\n            if (taskDueDateStr === todayStr) {\n              tasksDueToday.push(task);\n            } else if (diffDays < 0) {\n              pastDueTasks.push({\n                ...task,\n                dueDateDiff: Math.abs(diffDays)\n              });\n            } else {\n              futureTasks.push({\n                ...task,\n                dueDateDiff: diffDays\n              });\n            }\n          });\n          tasksDueToday.sort((a, b) => priorityValue[b.priority] - priorityValue[a.priority]);\n          pastDueTasks.sort((a, b) => {\n            if (a.dueDateDiff !== b.dueDateDiff) {\n              return a.dueDateDiff - b.dueDateDiff;\n            }\n            return priorityValue[b.priority] - priorityValue[a.priority];\n          });\n          futureTasks.sort((a, b) => {\n            if (a.dueDateDiff !== b.dueDateDiff) {\n              return a.dueDateDiff - b.dueDateDiff;\n            }\n            return priorityValue[b.priority] - priorityValue[a.priority];\n          });\n          let recommendedTask = null;\n          if (tasksDueToday.length > 0) {\n            recommendedTask = tasksDueToday[0];\n          } else if (pastDueTasks.length > 0) {\n            recommendedTask = pastDueTasks[0];\n          } else if (futureTasks.length > 0) {\n            recommendedTask = futureTasks[0];\n          }\n          if (recommendedTask) {\n            setAiSuggestion(`Based on your schedule and learning patterns, I recommend focusing on your \"${recommendedTask.title}\" today.`);\n          } else {\n            setAiSuggestion(\"You have no incomplete tasks! Add a new task to keep progressing.\");\n          }\n        }, 1000);\n        setLoading(false);\n      }\n    };\n    fetchUserData();\n  }, []);\n\n  // Debug studyStats after updates\n  useEffect(() => {\n    console.log(\"Current studyStats (after update):\", studyStats);\n  }, [studyStats]);\n\n  // Update completedTasks when tasks change\n  useEffect(() => {\n    const completedCount = tasks.filter(task => task.completed).length;\n    setStudyStats(prevStats => {\n      const newStats = {\n        ...prevStats,\n        completedTasks: completedCount,\n        studyHoursLog: prevStats.studyHoursLog || []\n      };\n      console.log(\"Updated studyStats (completedTasks):\", newStats);\n      return newStats;\n    });\n  }, [tasks]);\n\n  // Debounced save function with improved error handling and data alignment\n  useEffect(() => {\n    const saveUserData = async () => {\n      try {\n        // Serialize studyStats to match backend schema, including studyHoursLog\n        const serializedStudyStats = {\n          totalHours: studyStats.totalHours,\n          completedTasks: studyStats.completedTasks,\n          streak: studyStats.streak,\n          lastActiveDate: studyStats.lastActiveDate || null,\n          lastStreakUpdate: studyStats.lastStreakUpdate || null,\n          studyHoursLog: studyStats.studyHoursLog || []\n        };\n        const dataToSend = {\n          tasks,\n          studyStats: serializedStudyStats,\n          points,\n          badges,\n          themes: [\"Light Mode\", \"Dark Mode\", \"Ocean Breeze\", \"Sunset Glow\", \"Forest Whisper\"],\n          currentTheme,\n          unlockedThemes // Save unlocked themes\n        };\n        console.log(\"Sending data to backend:\", JSON.stringify(dataToSend, null, 2));\n        const response = await fetch(`http://localhost:5000/api/user/${userId}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(dataToSend)\n        });\n        console.log(\"Response status:\", response.status);\n        const responseBody = await response.text();\n        console.log(\"Response body:\", responseBody);\n        if (!response.ok) {\n          throw new Error(`Failed to save user data: ${response.status} - ${responseBody}`);\n        }\n        console.log(\"Data saved successfully\");\n      } catch (err) {\n        console.error(\"Error saving user data:\", err);\n        toast.error(`Failed to save progress: ${err.message}`);\n      }\n    };\n    const debounceSave = setTimeout(() => {\n      saveUserData();\n    }, 1000);\n    return () => clearTimeout(debounceSave);\n  }, [tasks, studyStats, points, badges, currentTheme, unlockedThemes]);\n\n  // Function to log study hours\n  const logStudyHours = hours => {\n    const parsedHours = parseFloat(hours);\n    if (isNaN(parsedHours) || parsedHours <= 0) {\n      toast.error(\"Please enter a valid number of hours greater than 0.\");\n      return;\n    }\n    const roundedHours = Math.round(parsedHours * 100) / 100;\n    const today = new Date().toISOString().split(\"T\")[0];\n    setStudyStats(prev => {\n      const studyHoursLog = prev.studyHoursLog || [];\n      const existingLog = studyHoursLog.find(log => log.date === today);\n      let updatedLog;\n      if (existingLog) {\n        updatedLog = studyHoursLog.map(log => log.date === today ? {\n          ...log,\n          hours: Math.round((log.hours + roundedHours) * 100) / 100\n        } : log);\n      } else {\n        updatedLog = [...studyHoursLog, {\n          date: today,\n          hours: roundedHours\n        }];\n      }\n      const newStats = {\n        ...prev,\n        totalHours: Math.round((prev.totalHours + roundedHours) * 100) / 100,\n        studyHoursLog: updatedLog\n      };\n      console.log(\"Updated studyStats (logStudyHours):\", newStats);\n      return newStats;\n    });\n    updateStreak(today);\n    toast.success(`Logged ${roundedHours} study hours!`);\n  };\n  const getStudyTips = () => {\n    setAiSuggestion(\"Loading new suggestions...\");\n    setTimeout(() => {\n      const tips = [\"Try using the Pomodoro technique: 25 minutes of focused study followed by a 5-minute break.\", \"For difficult subjects, try teaching the material to an imaginary student.\", \"Create visual mind maps to connect key concepts in your subjects.\", \"Review your notes within 24 hours of taking them to improve retention.\", \"Study in short, frequent sessions rather than long cramming sessions.\"];\n      const randomTip = tips[Math.floor(Math.random() * tips.length)];\n      setAiSuggestion(randomTip);\n    }, 1500);\n  };\n  const generateSchedule = () => {\n    setAiSuggestion(\"Generating personalized study schedule...\");\n    setTimeout(() => {\n      const today = new Date();\n      const todayStr = new Date().toISOString().split(\"T\")[0];\n      const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n      const todayDay = days[today.getDay()];\n      const incompleteTasks = tasks.filter(task => !task.completed);\n      if (incompleteTasks.length === 0) {\n        setAiSuggestion(\"You have no incomplete tasks to schedule. Add a new task to get started!\");\n        return;\n      }\n      const tasksDueToday = [];\n      const pastDueTasks = [];\n      const futureTasksDueTomorrow = [];\n      const otherFutureTasks = [];\n      incompleteTasks.forEach(task => {\n        const taskDueDate = new Date(task.dueDate);\n        const taskDueDateStr = task.dueDate;\n        const diffDays = (new Date(taskDueDateStr) - new Date(todayStr)) / (1000 * 60 * 60 * 24);\n        if (taskDueDateStr === todayStr) {\n          tasksDueToday.push(task);\n        } else if (diffDays < 0) {\n          pastDueTasks.push({\n            ...task,\n            dueDateDiff: Math.abs(diffDays)\n          });\n        } else {\n          if (diffDays === 1) {\n            futureTasksDueTomorrow.push({\n              ...task,\n              dueDateDiff: diffDays\n            });\n          } else {\n            otherFutureTasks.push({\n              ...task,\n              dueDateDiff: diffDays\n            });\n          }\n        }\n      });\n      const priorityValue = {\n        High: 3,\n        Medium: 2,\n        Low: 1\n      };\n      tasksDueToday.sort((a, b) => priorityValue[b.priority] - priorityValue[a.priority]);\n      pastDueTasks.sort((a, b) => {\n        if (a.dueDateDiff !== b.dueDateDiff) {\n          return a.dueDateDiff - b.dueDateDiff;\n        }\n        return priorityValue[b.priority] - priorityValue[a.priority];\n      });\n      futureTasksDueTomorrow.sort((a, b) => priorityValue[b.priority] - priorityValue[a.priority]);\n      otherFutureTasks.sort((a, b) => {\n        if (a.dueDateDiff !== b.dueDateDiff) {\n          return a.dueDateDiff - b.dueDateDiff;\n        }\n        return priorityValue[b.priority] - priorityValue[a.priority];\n      });\n      const schedule = {\n        today: [],\n        futureDays: []\n      };\n      const getHours = priority => {\n        return priority === \"High\" ? 2 : priority === \"Medium\" ? 1.5 : 1;\n      };\n      tasksDueToday.forEach(task => {\n        const hours = getHours(task.priority);\n        schedule.today.push(`${task.title} (${hours} hours)`);\n      });\n      pastDueTasks.forEach(task => {\n        const hours = getHours(task.priority);\n        schedule.today.push(`${task.title} (${hours} hours)`);\n      });\n      futureTasksDueTomorrow.forEach(task => {\n        const hours = getHours(task.priority);\n        schedule.today.push(`${task.title} (${hours} hours)`);\n      });\n      otherFutureTasks.forEach(task => {\n        const taskDueDate = new Date(task.dueDate);\n        const diffDays = task.dueDateDiff;\n        const hours = getHours(task.priority);\n        const scheduleDate = new Date(taskDueDate);\n        scheduleDate.setDate(taskDueDate.getDate() - 1);\n        const scheduleDateStr = scheduleDate.toISOString().split(\"T\")[0];\n        const scheduleDay = days[scheduleDate.getDay()];\n        let dayEntry = schedule.futureDays.find(entry => entry.dayName === scheduleDay && entry.date === scheduleDateStr);\n        if (!dayEntry) {\n          dayEntry = {\n            dayName: scheduleDay,\n            date: scheduleDateStr,\n            tasks: []\n          };\n          schedule.futureDays.push(dayEntry);\n        }\n        dayEntry.tasks.push(`${task.title} (${hours} hours)`);\n      });\n      schedule.futureDays.sort((a, b) => new Date(a.date) - new Date(b.date));\n      const scheduleMessage = [\"Based on your upcoming tasks and past performance, here's a suggested schedule:\\n\"];\n      if (schedule.today.length > 0) {\n        scheduleMessage.push(`- ${todayDay} (Today):`);\n        schedule.today.forEach(taskEntry => {\n          scheduleMessage.push(`  - ${taskEntry}`);\n        });\n      }\n      schedule.futureDays.forEach(day => {\n        scheduleMessage.push(`- ${day.dayName} (${day.date}):`);\n        day.tasks.forEach(taskEntry => {\n          scheduleMessage.push(`  - ${taskEntry}`);\n        });\n      });\n      if (schedule.today.length === 0 && schedule.futureDays.length === 0) {\n        scheduleMessage.push(\"No tasks to schedule for the immediate future.\");\n      }\n      setAiSuggestion(scheduleMessage.join(\"\\n\"));\n    }, 2000);\n  };\n  const addTask = newTask => {\n    const task = {\n      id: Date.now(),\n      ...newTask,\n      completedDate: null\n    };\n    setTasks([...tasks, task]);\n  };\n  const deleteTask = id => {\n    setTasks(tasks.filter(task => task.id !== id));\n  };\n  const toggleTaskComplete = id => {\n    const task = tasks.find(task => task.id === id);\n    if (!task) return;\n    const today = new Date().toISOString().split(\"T\")[0];\n    let newPoints = points;\n    let newBadges = [...badges];\n    let notifications = [];\n    const updatedTasks = tasks.map(t => t.id === id ? {\n      ...t,\n      completed: !t.completed,\n      completedDate: !t.completed ? today : null\n    } : t);\n    setTasks(updatedTasks);\n    if (!task.completed) {\n      let pointsToAdd = task.priority === \"High\" ? 30 : task.priority === \"Medium\" ? 20 : 10;\n      newPoints = points + pointsToAdd;\n      notifications.push(`🎉 +${pointsToAdd} Points! Keep it up!`);\n      const highPriorityTasks = updatedTasks.filter(t => t.priority === \"High\" && t.completed).length;\n      if (highPriorityTasks >= 5 && !badges.includes(\"Priority Master\")) {\n        newBadges.push(\"Priority Master\");\n        notifications.push(\"🏆 Badge Earned: Priority Master!\");\n      }\n      const totalCompletedTasks = updatedTasks.filter(t => t.completed).length;\n      if (totalCompletedTasks >= 10 && !badges.includes(\"Task Titan\")) {\n        newBadges.push(\"Task Titan\");\n        notifications.push(\"🏆 Badge Earned: Task Titan!\");\n      }\n      const dueDate = new Date(task.dueDate);\n      const todayDate = new Date();\n      if (dueDate > todayDate) {\n        const earlyTasks = updatedTasks.filter(t => new Date(t.dueDate) > todayDate && t.completed).length;\n        if (earlyTasks >= 3 && !badges.includes(\"Early Bird\")) {\n          newBadges.push(\"Early Bird\");\n          notifications.push(\"🏆 Badge Earned: Early Bird!\");\n        }\n      }\n      updateStreak(today);\n    } else {\n      let pointsToDeduct = task.priority === \"High\" ? 30 : task.priority === \"Medium\" ? 20 : 10;\n      newPoints = Math.max(0, points - pointsToDeduct);\n      notifications.push(`↩️ -${pointsToDeduct} Points. Task unmarked as completed.`);\n    }\n    setPoints(newPoints);\n    setBadges(newBadges);\n    notifications.forEach(msg => toast.success(msg));\n  };\n  const updateTask = updatedTask => {\n    setTasks(tasks.map(task => task.id === updatedTask.id ? updatedTask : task));\n  };\n  useEffect(() => {\n    if (studyStats.streak >= 7 && !badges.includes(\"Streak Star\")) {\n      let newBadges = [...badges, \"Streak Star\"];\n      let newPoints = points + 50;\n      setBadges(newBadges);\n      setPoints(newPoints);\n      toast.success(\"🏆 Badge Earned: Streak Star!\");\n      toast.success(\"🎉 +50 Points for 7-Day Streak!\");\n    }\n  }, [studyStats.streak]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen ${themeStyles[currentTheme]}`,\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 855,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: `p-4 ${headerStyles[currentTheme]}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 15\n            }, this), \"StudyBuddy AI Planner\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-4 flex space-x-2\",\n            children: unlockedThemes.map(theme => /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => handleThemeChange(theme),\n              className: `cursor-pointer text-xl ${currentTheme === theme ? \"text-yellow-400\" : \"\"}`,\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: themeIcons[theme]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 19\n              }, this)\n            }, theme, false, {\n              fileName: _jsxFileName,\n              lineNumber: 865,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 863,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 858,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `px-4 py-2 rounded-lg text-sm ${currentTheme === \"Dark Mode\" ? \"bg-indigo-700 text-gray-200\" : \"bg-indigo-700 text-white\"}`,\n          children: new Date().toLocaleDateString(\"en-US\", {\n            weekday: \"long\",\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 877,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 857,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 856,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: `shadow ${navStyles[currentTheme]}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab(\"dashboard\"),\n            className: `px-4 py-3 font-medium text-sm ${activeTab === \"dashboard\" ? \"border-b-2 border-indigo-600 text-indigo-600\" : currentTheme === \"Dark Mode\" ? \"text-gray-300\" : \"text-gray-500\"}`,\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 897,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab(\"tasks\"),\n            className: `px-4 py-3 font-medium text-sm ${activeTab === \"tasks\" ? \"border-b-2 border-indigo-600 text-indigo-600\" : currentTheme === \"Dark Mode\" ? \"text-gray-300\" : \"text-gray-500\"}`,\n            children: \"Tasks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 909,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab(\"analytics\"),\n            className: `px-4 py-3 font-medium text-sm ${activeTab === \"analytics\" ? \"border-b-2 border-indigo-600 text-indigo-600\" : currentTheme === \"Dark Mode\" ? \"text-gray-300\" : \"text-gray-500\"}`,\n            children: \"Analytics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab(\"rewards\"),\n            className: `px-4 py-3 font-medium text-sm ${activeTab === \"rewards\" ? \"border-b-2 border-indigo-600 text-indigo-600\" : currentTheme === \"Dark Mode\" ? \"text-gray-300\" : \"text-gray-500\"}`,\n            children: \"Rewards\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 933,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 895,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 894,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto p-4\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-pulse flex justify-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-4 h-4 rounded-full ${currentTheme === \"Dark Mode\" ? \"bg-indigo-500\" : \"bg-indigo-600\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 953,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-4 h-4 rounded-full ${currentTheme === \"Dark Mode\" ? \"bg-indigo-500\" : \"bg-indigo-600\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 960,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-4 h-4 rounded-full ${currentTheme === \"Dark Mode\" ? \"bg-indigo-500\" : \"bg-indigo-600\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 967,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2\",\n          children: \"Loading your study data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 951,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [activeTab === \"dashboard\" && /*#__PURE__*/_jsxDEV(Dashboard, {\n          tasks: tasks,\n          studyStats: studyStats,\n          aiSuggestion: aiSuggestion,\n          getStudyTips: getStudyTips,\n          generateSchedule: generateSchedule,\n          setActiveTab: setActiveTab,\n          toggleTaskComplete: toggleTaskComplete,\n          deleteTask: deleteTask,\n          currentTheme: currentTheme,\n          logStudyHours: logStudyHours\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 980,\n          columnNumber: 15\n        }, this), activeTab === \"tasks\" && /*#__PURE__*/_jsxDEV(TaskManager, {\n          tasks: tasks,\n          addTask: addTask,\n          updateTask: updateTask,\n          deleteTask: deleteTask,\n          toggleTaskComplete: toggleTaskComplete,\n          currentTheme: currentTheme\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 995,\n          columnNumber: 15\n        }, this), activeTab === \"analytics\" && /*#__PURE__*/_jsxDEV(Analytics, {\n          tasks: tasks,\n          currentTheme: currentTheme\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1006,\n          columnNumber: 15\n        }, this), activeTab === \"rewards\" && /*#__PURE__*/_jsxDEV(Rewards, {\n          points: points,\n          badges: badges,\n          studyStats: studyStats,\n          currentTheme: currentTheme,\n          onPointsUpdate: handlePointsUpdate,\n          onThemeUnlock: handleThemeUnlock\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1010,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 949,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 854,\n    columnNumber: 5\n  }, this);\n}\n_s(Layout, \"CpoSXAqZtmVVtLZ/orin7Etk0N0=\");\n_c = Layout;\nexport default Layout;\nvar _c;\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"names":["React","useState","useEffect","BookOpen","FontAwesomeIcon","faSun","faMoon","faWater","faFire","faLeaf","Dashboard","TaskManager","Analytics","Rewards","ToastContainer","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","Layout","_s","activeTab","setActiveTab","tasks","setTasks","studyStats","setStudyStats","totalHours","completedTasks","streak","lastActiveDate","lastStreakUpdate","studyHoursLog","aiSuggestion","setAiSuggestion","points","setPoints","badges","setBadges","currentTheme","setCurrentTheme","unlockedThemes","setUnlockedThemes","loading","setLoading","userId","themeStyles","headerStyles","navStyles","themeIcons","handleThemeChange","theme","includes","info","handlePointsUpdate","newPoints","handleThemeUnlock","themeName","updateStreak","today","prev","lastActive","Date","todayDate","newStreak","newLastActiveDate","newLastStreakUpdate","toISOString","split","diffTime","diffDays","Math","ceil","newStats","console","log","fetchUserData","_data$studyStats","_data$studyStats2","_data$studyStats3","_data$studyStats4","_data$studyStats5","_data$studyStats6","response","fetch","ok","Error","status","data","json","fetchedStats","lastDate","currentDate","lastFetchTimestamp","localStorage","getItem","currentTimestamp","now","setItem","toString","getTime","timeSinceLastFetch","parseInt","Infinity","timeSinceLastActive","success","autoClose","setTimeout","incompleteTasks","filter","task","completed","length","todayStr","priorityValue","High","Medium","Low","tasksDueToday","pastDueTasks","futureTasks","forEach","taskDueDateStr","dueDate","push","dueDateDiff","abs","sort","a","b","priority","recommendedTask","title","err","error","id","subject","completedDate","defaultIncompleteTasks","completedCount","prevStats","saveUserData","serializedStudyStats","dataToSend","themes","JSON","stringify","method","headers","body","responseBody","text","message","debounceSave","clearTimeout","logStudyHours","hours","parsedHours","parseFloat","isNaN","roundedHours","round","existingLog","find","date","updatedLog","map","getStudyTips","tips","randomTip","floor","random","generateSchedule","days","todayDay","getDay","futureTasksDueTomorrow","otherFutureTasks","taskDueDate","schedule","futureDays","getHours","scheduleDate","setDate","getDate","scheduleDateStr","scheduleDay","dayEntry","entry","dayName","scheduleMessage","taskEntry","day","join","addTask","newTask","deleteTask","toggleTaskComplete","newBadges","notifications","updatedTasks","t","pointsToAdd","highPriorityTasks","totalCompletedTasks","earlyTasks","pointsToDeduct","max","msg","updateTask","updatedTask","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","toLocaleDateString","weekday","year","month","onPointsUpdate","onThemeUnlock","_c","$RefreshReg$"],"sources":["D:/Final Project/study-buddy-planner/src/components/Layout.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BookOpen } from \"lucide-react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faSun,\r\n  faMoon,\r\n  faWater,\r\n  faFire,\r\n  faLeaf,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Dashboard from \"./Dashboard\";\r\nimport TaskManager from \"./TaskManager\";\r\nimport Analytics from \"./Analytics\";\r\nimport Rewards from \"./Rewards\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction Layout() {\r\n  const [activeTab, setActiveTab] = useState(\"dashboard\");\r\n  const [tasks, setTasks] = useState([]);\r\n  const [studyStats, setStudyStats] = useState({\r\n    totalHours: 0,\r\n    completedTasks: 0,\r\n    streak: 0,\r\n    lastActiveDate: null,\r\n    lastStreakUpdate: null,\r\n    studyHoursLog: [],\r\n  });\r\n  const [aiSuggestion, setAiSuggestion] = useState(\"\");\r\n  const [points, setPoints] = useState(0);\r\n  const [badges, setBadges] = useState([]);\r\n  const [currentTheme, setCurrentTheme] = useState(\"Light Mode\");\r\n  const [unlockedThemes, setUnlockedThemes] = useState([\"Light Mode\"]); // Default to Light Mode only\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const userId = \"user123\";\r\n\r\n  // Theme styles for all themes\r\n  const themeStyles = {\r\n    \"Light Mode\": \"bg-slate-50 text-gray-800\",\r\n    \"Dark Mode\": \"bg-gray-800 text-gray-200\",\r\n    \"Ocean Breeze\": \"bg-gradient-to-br from-blue-100 to-teal-200 text-blue-900\",\r\n    \"Sunset Glow\":\r\n      \"bg-gradient-to-br from-orange-100 to-pink-200 text-orange-900\",\r\n    \"Forest Whisper\":\r\n      \"bg-gradient-to-br from-green-100 to-teal-200 text-green-900\",\r\n  };\r\n\r\n  const headerStyles = {\r\n    \"Light Mode\": \"bg-indigo-600 text-white\",\r\n    \"Dark Mode\": \"bg-indigo-900 text-gray-200\",\r\n    \"Ocean Breeze\": \"bg-blue-600 text-white\",\r\n    \"Sunset Glow\": \"bg-orange-600 text-white\",\r\n    \"Forest Whisper\": \"bg-green-600 text-white\",\r\n  };\r\n\r\n  const navStyles = {\r\n    \"Light Mode\": \"bg-white text-gray-500\",\r\n    \"Dark Mode\": \"bg-gray-700 text-gray-300\",\r\n    \"Ocean Breeze\": \"bg-blue-200 text-blue-700\",\r\n    \"Sunset Glow\": \"bg-orange-200 text-orange-700\",\r\n    \"Forest Whisper\": \"bg-green-200 text-green-700\",\r\n  };\r\n\r\n  // Map themes to their FontAwesome icons\r\n  const themeIcons = {\r\n    \"Light Mode\": faSun,\r\n    \"Dark Mode\": faMoon,\r\n    \"Ocean Breeze\": faWater,\r\n    \"Sunset Glow\": faFire,\r\n    \"Forest Whisper\": faLeaf,\r\n  };\r\n\r\n  // Handle theme change when clicking an icon\r\n  const handleThemeChange = (theme) => {\r\n    if (unlockedThemes.includes(theme)) {\r\n      setCurrentTheme(theme);\r\n      toast.info(`🎨 Switched to ${theme}!`);\r\n    }\r\n  };\r\n\r\n  // Callbacks for Rewards.jsx\r\n  const handlePointsUpdate = (newPoints) => {\r\n    setPoints(newPoints);\r\n  };\r\n\r\n  const handleThemeUnlock = (themeName) => {\r\n    if (!unlockedThemes.includes(themeName)) {\r\n      setUnlockedThemes([...unlockedThemes, themeName]);\r\n    }\r\n  };\r\n\r\n  // Function to update streak\r\n  const updateStreak = (today) => {\r\n    setStudyStats((prev) => {\r\n      const lastActive = prev.lastActiveDate\r\n        ? new Date(prev.lastActiveDate)\r\n        : null;\r\n      const lastStreakUpdate = prev.lastStreakUpdate\r\n        ? new Date(prev.lastStreakUpdate)\r\n        : null;\r\n      const todayDate = new Date(today);\r\n\r\n      let newStreak = prev.streak;\r\n      let newLastActiveDate = today;\r\n      let newLastStreakUpdate = prev.lastStreakUpdate;\r\n\r\n      if (!lastActive || lastActive.toISOString().split(\"T\")[0] !== today) {\r\n        if (lastActive) {\r\n          const diffTime = todayDate - lastActive;\r\n          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n          if (diffDays === 1) {\r\n            newStreak = prev.streak + 1;\r\n            newLastStreakUpdate = today;\r\n          } else if (diffDays > 1) {\r\n            newStreak = 1;\r\n            newLastStreakUpdate = today;\r\n          }\r\n        } else {\r\n          newStreak = 1;\r\n          newLastStreakUpdate = today;\r\n        }\r\n      }\r\n\r\n      if (\r\n        lastStreakUpdate &&\r\n        new Date(lastStreakUpdate).toISOString().split(\"T\")[0] !== today\r\n      ) {\r\n        const diffTime = todayDate - new Date(lastStreakUpdate);\r\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n        if (diffDays > 1) {\r\n          newStreak = 1;\r\n          newLastStreakUpdate = today;\r\n        }\r\n      }\r\n\r\n      const newStats = {\r\n        ...prev,\r\n        streak: newStreak,\r\n        lastActiveDate: newLastActiveDate,\r\n        lastStreakUpdate: newLastStreakUpdate,\r\n        studyHoursLog: prev.studyHoursLog || [],\r\n      };\r\n      console.log(\"Updated studyStats (updateStreak):\", newStats);\r\n      return newStats;\r\n    });\r\n  };\r\n\r\n  // Fetch user data from backend on mount\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `http://localhost:5000/api/user/${userId}`\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(`Failed to fetch user data: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        console.log(\"Fetched data:\", data);\r\n\r\n        setTasks(data.tasks || []);\r\n        const fetchedStats = {\r\n          totalHours: data.studyStats?.totalHours || 0,\r\n          completedTasks: data.studyStats?.completedTasks || 0,\r\n          streak: data.studyStats?.streak || 0,\r\n          lastActiveDate: data.studyStats?.lastActiveDate || null,\r\n          lastStreakUpdate: data.studyStats?.lastStreakUpdate || null,\r\n          studyHoursLog: data.studyStats?.studyHoursLog || [],\r\n        };\r\n        console.log(\"Setting initial studyStats:\", fetchedStats);\r\n        setStudyStats(fetchedStats);\r\n        setPoints(data.points || 0);\r\n        setBadges(data.badges || []);\r\n        setCurrentTheme(data.currentTheme || \"Light Mode\");\r\n        setUnlockedThemes(data.unlockedThemes || [\"Light Mode\"]); // Load unlocked themes\r\n\r\n        // Update streak\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        console.log(\"Today's date:\", today);\r\n        const { lastActiveDate, streak, lastStreakUpdate } = fetchedStats;\r\n\r\n        let newStats = { ...fetchedStats };\r\n        if (lastStreakUpdate !== today) {\r\n          if (!lastActiveDate) {\r\n            console.log(\"No lastActiveDate, initializing with today's date...\");\r\n            newStats = {\r\n              ...fetchedStats,\r\n              lastActiveDate: today,\r\n              lastStreakUpdate: today,\r\n              studyHoursLog: fetchedStats.studyHoursLog || [],\r\n            };\r\n          } else {\r\n            const lastDate = new Date(lastActiveDate);\r\n            const currentDate = new Date(today);\r\n            const diffDays = (currentDate - lastDate) / (1000 * 60 * 60 * 24);\r\n            console.log(\"Days difference:\", diffDays);\r\n\r\n            if (diffDays === 1) {\r\n              newStats = {\r\n                ...fetchedStats,\r\n                streak: fetchedStats.streak + 1,\r\n                lastActiveDate: today,\r\n                lastStreakUpdate: today,\r\n                studyHoursLog: fetchedStats.studyHoursLog || [],\r\n              };\r\n              console.log(\"Updated studyStats (increment streak):\", newStats);\r\n            } else if (diffDays > 1) {\r\n              newStats = {\r\n                ...fetchedStats,\r\n                streak: 0,\r\n                lastActiveDate: today,\r\n                lastStreakUpdate: today,\r\n                studyHoursLog: fetchedStats.studyHoursLog || [],\r\n              };\r\n              console.log(\"Updated studyStats (reset streak):\", newStats);\r\n            } else {\r\n              newStats = {\r\n                ...fetchedStats,\r\n                lastStreakUpdate: today,\r\n                studyHoursLog: fetchedStats.studyHoursLog || [],\r\n              };\r\n              console.log(\"Updated studyStats (same day):\", newStats);\r\n            }\r\n          }\r\n          setStudyStats(newStats);\r\n        } else {\r\n          console.log(\"Streak already updated today, skipping...\");\r\n        }\r\n\r\n        // Check if this fetch is likely due to a server restart\r\n        const lastFetchTimestamp = localStorage.getItem(\"lastFetchTimestamp\");\r\n        const currentTimestamp = Date.now();\r\n        localStorage.setItem(\"lastFetchTimestamp\", currentTimestamp.toString());\r\n\r\n        // If there's no last fetch timestamp (first load ever) or if the data indicates a server restart\r\n        // (e.g., streak reset or significant time gap), show the toast\r\n        const lastActive = fetchedStats.lastActiveDate\r\n          ? new Date(fetchedStats.lastActiveDate).getTime()\r\n          : 0;\r\n        const timeSinceLastFetch = lastFetchTimestamp\r\n          ? currentTimestamp - parseInt(lastFetchTimestamp)\r\n          : Infinity;\r\n        const timeSinceLastActive = lastActive\r\n          ? currentTimestamp - lastActive\r\n          : Infinity;\r\n\r\n        // Show toast if this is the first fetch OR if the server data indicates a restart\r\n        // (e.g., no recent activity or streak reset)\r\n        if (\r\n          !lastFetchTimestamp || // First load ever\r\n          (timeSinceLastFetch > 60000 && timeSinceLastActive > 60000) || // No recent fetch or activity (1 minute threshold)\r\n          (fetchedStats.streak === 0 && fetchedStats.totalHours === 0) // Data reset (indicative of server restart)\r\n        ) {\r\n          toast.success(\"Progress saved successfully!\", { autoClose: 2000 });\r\n        }\r\n\r\n        // Set initial AI suggestion based on new conditions\r\n        setTimeout(() => {\r\n          const incompleteTasks = (data.tasks || []).filter(\r\n            (task) => !task.completed\r\n          );\r\n          if (incompleteTasks.length === 0) {\r\n            setAiSuggestion(\r\n              \"You have no incomplete tasks! Add a new task to keep progressing.\"\r\n            );\r\n            return;\r\n          }\r\n\r\n          const todayStr = new Date().toISOString().split(\"T\")[0];\r\n          const priorityValue = { High: 3, Medium: 2, Low: 1 };\r\n\r\n          // Categorize tasks\r\n          const tasksDueToday = [];\r\n          const pastDueTasks = [];\r\n          const futureTasks = [];\r\n\r\n          incompleteTasks.forEach((task) => {\r\n            const taskDueDateStr = task.dueDate;\r\n            const diffDays =\r\n              (new Date(taskDueDateStr) - new Date(todayStr)) /\r\n              (1000 * 60 * 60 * 24);\r\n\r\n            if (taskDueDateStr === todayStr) {\r\n              tasksDueToday.push(task);\r\n            } else if (diffDays < 0) {\r\n              pastDueTasks.push({ ...task, dueDateDiff: Math.abs(diffDays) });\r\n            } else {\r\n              futureTasks.push({ ...task, dueDateDiff: diffDays });\r\n            }\r\n          });\r\n\r\n          // Sort tasks within each category\r\n          tasksDueToday.sort(\r\n            (a, b) => priorityValue[b.priority] - priorityValue[a.priority]\r\n          );\r\n          pastDueTasks.sort((a, b) => {\r\n            if (a.dueDateDiff !== b.dueDateDiff) {\r\n              return a.dueDateDiff - b.dueDateDiff;\r\n            }\r\n            return priorityValue[b.priority] - priorityValue[a.priority];\r\n          });\r\n          futureTasks.sort((a, b) => {\r\n            if (a.dueDateDiff !== b.dueDateDiff) {\r\n              return a.dueDateDiff - b.dueDateDiff;\r\n            }\r\n            return priorityValue[b.priority] - priorityValue[a.priority];\r\n          });\r\n\r\n          // Apply prioritization rules for AI suggestion\r\n          let recommendedTask = null;\r\n\r\n          // Rule 1: Prioritize today's task with highest priority\r\n          if (tasksDueToday.length > 0) {\r\n            recommendedTask = tasksDueToday[0];\r\n          }\r\n          // Rule 2: If no tasks today, favor past-due task with highest priority\r\n          else if (pastDueTasks.length > 0) {\r\n            recommendedTask = pastDueTasks[0];\r\n          }\r\n          // Rule 3: If only future tasks remain, favor the one with highest priority\r\n          else if (futureTasks.length > 0) {\r\n            recommendedTask = futureTasks[0];\r\n          }\r\n\r\n          if (recommendedTask) {\r\n            setAiSuggestion(\r\n              `Based on your schedule and learning patterns, I recommend focusing on your \"${recommendedTask.title}\" today.`\r\n            );\r\n          } else {\r\n            setAiSuggestion(\r\n              \"You have no incomplete tasks! Add a new task to keep progressing.\"\r\n            );\r\n          }\r\n        }, 1000);\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error fetching user data:\", err);\r\n        toast.error(\"Failed to load user data. Using defaults.\");\r\n        setTasks([\r\n          {\r\n            id: 1,\r\n            title: \"Complete Math Assignment\",\r\n            dueDate: \"2025-04-25\",\r\n            priority: \"High\",\r\n            subject: \"Math\",\r\n            completed: false,\r\n            completedDate: null,\r\n          },\r\n          {\r\n            id: 2,\r\n            title: \"Review Chemistry Notes\",\r\n            dueDate: \"2025-04-23\",\r\n            priority: \"Medium\",\r\n            subject: \"Science\",\r\n            completed: true,\r\n            completedDate: \"2025-04-23\",\r\n          },\r\n          {\r\n            id: 3,\r\n            title: \"Research Paper Outline\",\r\n            dueDate: \"2025-04-30\",\r\n            priority: \"High\",\r\n            subject: \"English\",\r\n            completed: false,\r\n            completedDate: null,\r\n          },\r\n        ]);\r\n\r\n        // Set initial AI suggestion for default tasks\r\n        setTimeout(() => {\r\n          const defaultIncompleteTasks = [\r\n            {\r\n              id: 1,\r\n              title: \"Complete Math Assignment\",\r\n              dueDate: \"2025-04-25\",\r\n              priority: \"High\",\r\n              subject: \"Math\",\r\n              completed: false,\r\n              completedDate: null,\r\n            },\r\n            {\r\n              id: 2,\r\n              title: \"Review Chemistry Notes\",\r\n              dueDate: \"2025-04-23\",\r\n              priority: \"Medium\",\r\n              subject: \"Science\",\r\n              completed: true,\r\n              completedDate: \"2025-04-23\",\r\n            },\r\n            {\r\n              id: 3,\r\n              title: \"Research Paper Outline\",\r\n              dueDate: \"2025-04-30\",\r\n              priority: \"High\",\r\n              subject: \"English\",\r\n              completed: false,\r\n              completedDate: null,\r\n            },\r\n          ].filter((task) => !task.completed);\r\n\r\n          const todayStr = new Date().toISOString().split(\"T\")[0];\r\n          const priorityValue = { High: 3, Medium: 2, Low: 1 };\r\n\r\n          const tasksDueToday = [];\r\n          const pastDueTasks = [];\r\n          const futureTasks = [];\r\n\r\n          defaultIncompleteTasks.forEach((task) => {\r\n            const taskDueDateStr = task.dueDate;\r\n            const diffDays =\r\n              (new Date(taskDueDateStr) - new Date(todayStr)) /\r\n              (1000 * 60 * 60 * 24);\r\n\r\n            if (taskDueDateStr === todayStr) {\r\n              tasksDueToday.push(task);\r\n            } else if (diffDays < 0) {\r\n              pastDueTasks.push({ ...task, dueDateDiff: Math.abs(diffDays) });\r\n            } else {\r\n              futureTasks.push({ ...task, dueDateDiff: diffDays });\r\n            }\r\n          });\r\n\r\n          tasksDueToday.sort(\r\n            (a, b) => priorityValue[b.priority] - priorityValue[a.priority]\r\n          );\r\n          pastDueTasks.sort((a, b) => {\r\n            if (a.dueDateDiff !== b.dueDateDiff) {\r\n              return a.dueDateDiff - b.dueDateDiff;\r\n            }\r\n            return priorityValue[b.priority] - priorityValue[a.priority];\r\n          });\r\n          futureTasks.sort((a, b) => {\r\n            if (a.dueDateDiff !== b.dueDateDiff) {\r\n              return a.dueDateDiff - b.dueDateDiff;\r\n            }\r\n            return priorityValue[b.priority] - priorityValue[a.priority];\r\n          });\r\n\r\n          let recommendedTask = null;\r\n\r\n          if (tasksDueToday.length > 0) {\r\n            recommendedTask = tasksDueToday[0];\r\n          } else if (pastDueTasks.length > 0) {\r\n            recommendedTask = pastDueTasks[0];\r\n          } else if (futureTasks.length > 0) {\r\n            recommendedTask = futureTasks[0];\r\n          }\r\n\r\n          if (recommendedTask) {\r\n            setAiSuggestion(\r\n              `Based on your schedule and learning patterns, I recommend focusing on your \"${recommendedTask.title}\" today.`\r\n            );\r\n          } else {\r\n            setAiSuggestion(\r\n              \"You have no incomplete tasks! Add a new task to keep progressing.\"\r\n            );\r\n          }\r\n        }, 1000);\r\n\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserData();\r\n  }, []);\r\n\r\n  // Debug studyStats after updates\r\n  useEffect(() => {\r\n    console.log(\"Current studyStats (after update):\", studyStats);\r\n  }, [studyStats]);\r\n\r\n  // Update completedTasks when tasks change\r\n  useEffect(() => {\r\n    const completedCount = tasks.filter((task) => task.completed).length;\r\n    setStudyStats((prevStats) => {\r\n      const newStats = {\r\n        ...prevStats,\r\n        completedTasks: completedCount,\r\n        studyHoursLog: prevStats.studyHoursLog || [],\r\n      };\r\n      console.log(\"Updated studyStats (completedTasks):\", newStats);\r\n      return newStats;\r\n    });\r\n  }, [tasks]);\r\n\r\n  // Debounced save function with improved error handling and data alignment\r\n  useEffect(() => {\r\n    const saveUserData = async () => {\r\n      try {\r\n        // Serialize studyStats to match backend schema, including studyHoursLog\r\n        const serializedStudyStats = {\r\n          totalHours: studyStats.totalHours,\r\n          completedTasks: studyStats.completedTasks,\r\n          streak: studyStats.streak,\r\n          lastActiveDate: studyStats.lastActiveDate || null,\r\n          lastStreakUpdate: studyStats.lastStreakUpdate || null,\r\n          studyHoursLog: studyStats.studyHoursLog || [],\r\n        };\r\n\r\n        const dataToSend = {\r\n          tasks,\r\n          studyStats: serializedStudyStats,\r\n          points,\r\n          badges,\r\n          themes: [\r\n            \"Light Mode\",\r\n            \"Dark Mode\",\r\n            \"Ocean Breeze\",\r\n            \"Sunset Glow\",\r\n            \"Forest Whisper\",\r\n          ],\r\n          currentTheme,\r\n          unlockedThemes, // Save unlocked themes\r\n        };\r\n\r\n        console.log(\r\n          \"Sending data to backend:\",\r\n          JSON.stringify(dataToSend, null, 2)\r\n        );\r\n\r\n        const response = await fetch(\r\n          `http://localhost:5000/api/user/${userId}`,\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(dataToSend),\r\n          }\r\n        );\r\n\r\n        console.log(\"Response status:\", response.status);\r\n        const responseBody = await response.text();\r\n        console.log(\"Response body:\", responseBody);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            `Failed to save user data: ${response.status} - ${responseBody}`\r\n          );\r\n        }\r\n\r\n        console.log(\"Data saved successfully\");\r\n      } catch (err) {\r\n        console.error(\"Error saving user data:\", err);\r\n        toast.error(`Failed to save progress: ${err.message}`);\r\n      }\r\n    };\r\n\r\n    const debounceSave = setTimeout(() => {\r\n      saveUserData();\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(debounceSave);\r\n  }, [tasks, studyStats, points, badges, currentTheme, unlockedThemes]);\r\n\r\n  // Function to log study hours\r\n  const logStudyHours = (hours) => {\r\n    const parsedHours = parseFloat(hours);\r\n    if (isNaN(parsedHours) || parsedHours <= 0) {\r\n      toast.error(\"Please enter a valid number of hours greater than 0.\");\r\n      return;\r\n    }\r\n    const roundedHours = Math.round(parsedHours * 100) / 100;\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n    setStudyStats((prev) => {\r\n      const studyHoursLog = prev.studyHoursLog || [];\r\n      const existingLog = studyHoursLog.find((log) => log.date === today);\r\n      let updatedLog;\r\n      if (existingLog) {\r\n        updatedLog = studyHoursLog.map((log) =>\r\n          log.date === today\r\n            ? {\r\n                ...log,\r\n                hours: Math.round((log.hours + roundedHours) * 100) / 100,\r\n              }\r\n            : log\r\n        );\r\n      } else {\r\n        updatedLog = [...studyHoursLog, { date: today, hours: roundedHours }];\r\n      }\r\n      const newStats = {\r\n        ...prev,\r\n        totalHours: Math.round((prev.totalHours + roundedHours) * 100) / 100,\r\n        studyHoursLog: updatedLog,\r\n      };\r\n      console.log(\"Updated studyStats (logStudyHours):\", newStats);\r\n      return newStats;\r\n    });\r\n    updateStreak(today);\r\n    toast.success(`Logged ${roundedHours} study hours!`);\r\n  };\r\n\r\n  const getStudyTips = () => {\r\n    setAiSuggestion(\"Loading new suggestions...\");\r\n    setTimeout(() => {\r\n      const tips = [\r\n        \"Try using the Pomodoro technique: 25 minutes of focused study followed by a 5-minute break.\",\r\n        \"For difficult subjects, try teaching the material to an imaginary student.\",\r\n        \"Create visual mind maps to connect key concepts in your subjects.\",\r\n        \"Review your notes within 24 hours of taking them to improve retention.\",\r\n        \"Study in short, frequent sessions rather than long cramming sessions.\",\r\n      ];\r\n      const randomTip = tips[Math.floor(Math.random() * tips.length)];\r\n      setAiSuggestion(randomTip);\r\n    }, 1500);\r\n  };\r\n\r\n  const generateSchedule = () => {\r\n    setAiSuggestion(\"Generating personalized study schedule...\");\r\n    setTimeout(() => {\r\n      const today = new Date();\r\n      const todayStr = new Date().toISOString().split(\"T\")[0];\r\n      const days = [\r\n        \"Sunday\",\r\n        \"Monday\",\r\n        \"Tuesday\",\r\n        \"Wednesday\",\r\n        \"Thursday\",\r\n        \"Friday\",\r\n        \"Saturday\",\r\n      ];\r\n      const todayDay = days[today.getDay()];\r\n\r\n      const incompleteTasks = tasks.filter((task) => !task.completed);\r\n      if (incompleteTasks.length === 0) {\r\n        setAiSuggestion(\r\n          \"You have no incomplete tasks to schedule. Add a new task to get started!\"\r\n        );\r\n        return;\r\n      }\r\n\r\n      const tasksDueToday = [];\r\n      const pastDueTasks = [];\r\n      const futureTasksDueTomorrow = [];\r\n      const otherFutureTasks = [];\r\n\r\n      incompleteTasks.forEach((task) => {\r\n        const taskDueDate = new Date(task.dueDate);\r\n        const taskDueDateStr = task.dueDate;\r\n        const diffDays =\r\n          (new Date(taskDueDateStr) - new Date(todayStr)) /\r\n          (1000 * 60 * 60 * 24);\r\n\r\n        if (taskDueDateStr === todayStr) {\r\n          tasksDueToday.push(task);\r\n        } else if (diffDays < 0) {\r\n          pastDueTasks.push({ ...task, dueDateDiff: Math.abs(diffDays) });\r\n        } else {\r\n          if (diffDays === 1) {\r\n            futureTasksDueTomorrow.push({ ...task, dueDateDiff: diffDays });\r\n          } else {\r\n            otherFutureTasks.push({ ...task, dueDateDiff: diffDays });\r\n          }\r\n        }\r\n      });\r\n\r\n      const priorityValue = { High: 3, Medium: 2, Low: 1 };\r\n\r\n      tasksDueToday.sort(\r\n        (a, b) => priorityValue[b.priority] - priorityValue[a.priority]\r\n      );\r\n\r\n      pastDueTasks.sort((a, b) => {\r\n        if (a.dueDateDiff !== b.dueDateDiff) {\r\n          return a.dueDateDiff - b.dueDateDiff;\r\n        }\r\n        return priorityValue[b.priority] - priorityValue[a.priority];\r\n      });\r\n\r\n      futureTasksDueTomorrow.sort(\r\n        (a, b) => priorityValue[b.priority] - priorityValue[a.priority]\r\n      );\r\n\r\n      otherFutureTasks.sort((a, b) => {\r\n        if (a.dueDateDiff !== b.dueDateDiff) {\r\n          return a.dueDateDiff - b.dueDateDiff;\r\n        }\r\n        return priorityValue[b.priority] - priorityValue[a.priority];\r\n      });\r\n\r\n      const schedule = {\r\n        today: [],\r\n        futureDays: [],\r\n      };\r\n\r\n      const getHours = (priority) => {\r\n        return priority === \"High\" ? 2 : priority === \"Medium\" ? 1.5 : 1;\r\n      };\r\n\r\n      tasksDueToday.forEach((task) => {\r\n        const hours = getHours(task.priority);\r\n        schedule.today.push(`${task.title} (${hours} hours)`);\r\n      });\r\n\r\n      pastDueTasks.forEach((task) => {\r\n        const hours = getHours(task.priority);\r\n        schedule.today.push(`${task.title} (${hours} hours)`);\r\n      });\r\n\r\n      futureTasksDueTomorrow.forEach((task) => {\r\n        const hours = getHours(task.priority);\r\n        schedule.today.push(`${task.title} (${hours} hours)`);\r\n      });\r\n\r\n      otherFutureTasks.forEach((task) => {\r\n        const taskDueDate = new Date(task.dueDate);\r\n        const diffDays = task.dueDateDiff;\r\n        const hours = getHours(task.priority);\r\n\r\n        const scheduleDate = new Date(taskDueDate);\r\n        scheduleDate.setDate(taskDueDate.getDate() - 1);\r\n        const scheduleDateStr = scheduleDate.toISOString().split(\"T\")[0];\r\n        const scheduleDay = days[scheduleDate.getDay()];\r\n\r\n        let dayEntry = schedule.futureDays.find(\r\n          (entry) =>\r\n            entry.dayName === scheduleDay && entry.date === scheduleDateStr\r\n        );\r\n        if (!dayEntry) {\r\n          dayEntry = { dayName: scheduleDay, date: scheduleDateStr, tasks: [] };\r\n          schedule.futureDays.push(dayEntry);\r\n        }\r\n        dayEntry.tasks.push(`${task.title} (${hours} hours)`);\r\n      });\r\n\r\n      schedule.futureDays.sort((a, b) => new Date(a.date) - new Date(b.date));\r\n\r\n      const scheduleMessage = [\r\n        \"Based on your upcoming tasks and past performance, here's a suggested schedule:\\n\",\r\n      ];\r\n\r\n      if (schedule.today.length > 0) {\r\n        scheduleMessage.push(`- ${todayDay} (Today):`);\r\n        schedule.today.forEach((taskEntry) => {\r\n          scheduleMessage.push(`  - ${taskEntry}`);\r\n        });\r\n      }\r\n\r\n      schedule.futureDays.forEach((day) => {\r\n        scheduleMessage.push(`- ${day.dayName} (${day.date}):`);\r\n        day.tasks.forEach((taskEntry) => {\r\n          scheduleMessage.push(`  - ${taskEntry}`);\r\n        });\r\n      });\r\n\r\n      if (schedule.today.length === 0 && schedule.futureDays.length === 0) {\r\n        scheduleMessage.push(\"No tasks to schedule for the immediate future.\");\r\n      }\r\n\r\n      setAiSuggestion(scheduleMessage.join(\"\\n\"));\r\n    }, 2000);\r\n  };\r\n\r\n  const addTask = (newTask) => {\r\n    const task = { id: Date.now(), ...newTask, completedDate: null };\r\n    setTasks([...tasks, task]);\r\n  };\r\n\r\n  const deleteTask = (id) => {\r\n    setTasks(tasks.filter((task) => task.id !== id));\r\n  };\r\n\r\n  const toggleTaskComplete = (id) => {\r\n    const task = tasks.find((task) => task.id === id);\r\n    if (!task) return;\r\n\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n    let newPoints = points;\r\n    let newBadges = [...badges];\r\n    let notifications = [];\r\n\r\n    const updatedTasks = tasks.map((t) =>\r\n      t.id === id\r\n        ? {\r\n            ...t,\r\n            completed: !t.completed,\r\n            completedDate: !t.completed ? today : null,\r\n          }\r\n        : t\r\n    );\r\n    setTasks(updatedTasks);\r\n\r\n    if (!task.completed) {\r\n      let pointsToAdd =\r\n        task.priority === \"High\" ? 30 : task.priority === \"Medium\" ? 20 : 10;\r\n      newPoints = points + pointsToAdd;\r\n      notifications.push(`🎉 +${pointsToAdd} Points! Keep it up!`);\r\n\r\n      const highPriorityTasks = updatedTasks.filter(\r\n        (t) => t.priority === \"High\" && t.completed\r\n      ).length;\r\n      if (highPriorityTasks >= 5 && !badges.includes(\"Priority Master\")) {\r\n        newBadges.push(\"Priority Master\");\r\n        notifications.push(\"🏆 Badge Earned: Priority Master!\");\r\n      }\r\n\r\n      const totalCompletedTasks = updatedTasks.filter(\r\n        (t) => t.completed\r\n      ).length;\r\n      if (totalCompletedTasks >= 10 && !badges.includes(\"Task Titan\")) {\r\n        newBadges.push(\"Task Titan\");\r\n        notifications.push(\"🏆 Badge Earned: Task Titan!\");\r\n      }\r\n\r\n      const dueDate = new Date(task.dueDate);\r\n      const todayDate = new Date();\r\n      if (dueDate > todayDate) {\r\n        const earlyTasks = updatedTasks.filter(\r\n          (t) => new Date(t.dueDate) > todayDate && t.completed\r\n        ).length;\r\n        if (earlyTasks >= 3 && !badges.includes(\"Early Bird\")) {\r\n          newBadges.push(\"Early Bird\");\r\n          notifications.push(\"🏆 Badge Earned: Early Bird!\");\r\n        }\r\n      }\r\n\r\n      updateStreak(today);\r\n    } else {\r\n      let pointsToDeduct =\r\n        task.priority === \"High\" ? 30 : task.priority === \"Medium\" ? 20 : 10;\r\n      newPoints = Math.max(0, points - pointsToDeduct);\r\n      notifications.push(\r\n        `↩️ -${pointsToDeduct} Points. Task unmarked as completed.`\r\n      );\r\n    }\r\n\r\n    setPoints(newPoints);\r\n    setBadges(newBadges);\r\n    notifications.forEach((msg) => toast.success(msg));\r\n  };\r\n\r\n  const updateTask = (updatedTask) => {\r\n    setTasks(\r\n      tasks.map((task) => (task.id === updatedTask.id ? updatedTask : task))\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (studyStats.streak >= 7 && !badges.includes(\"Streak Star\")) {\r\n      let newBadges = [...badges, \"Streak Star\"];\r\n      let newPoints = points + 50;\r\n\r\n      setBadges(newBadges);\r\n      setPoints(newPoints);\r\n\r\n      toast.success(\"🏆 Badge Earned: Streak Star!\");\r\n      toast.success(\"🎉 +50 Points for 7-Day Streak!\");\r\n    }\r\n  }, [studyStats.streak]);\r\n\r\n  return (\r\n    <div className={`min-h-screen ${themeStyles[currentTheme]}`}>\r\n      <ToastContainer />\r\n      <header className={`p-4 ${headerStyles[currentTheme]}`}>\r\n        <div className=\"container mx-auto flex justify-between items-center\">\r\n          <div className=\"flex items-center\">\r\n            <h1 className=\"text-2xl font-bold flex items-center\">\r\n              <BookOpen className=\"mr-2\" />\r\n              StudyBuddy AI Planner\r\n            </h1>\r\n            <div className=\"ml-4 flex space-x-2\">\r\n              {unlockedThemes.map((theme) => (\r\n                <div\r\n                  key={theme}\r\n                  onClick={() => handleThemeChange(theme)}\r\n                  className={`cursor-pointer text-xl ${\r\n                    currentTheme === theme ? \"text-yellow-400\" : \"\"\r\n                  }`}\r\n                >\r\n                  <FontAwesomeIcon icon={themeIcons[theme]} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={`px-4 py-2 rounded-lg text-sm ${\r\n              currentTheme === \"Dark Mode\"\r\n                ? \"bg-indigo-700 text-gray-200\"\r\n                : \"bg-indigo-700 text-white\"\r\n            }`}\r\n          >\r\n            {new Date().toLocaleDateString(\"en-US\", {\r\n              weekday: \"long\",\r\n              year: \"numeric\",\r\n              month: \"long\",\r\n              day: \"numeric\",\r\n            })}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <nav className={`shadow ${navStyles[currentTheme]}`}>\r\n        <div className=\"container mx-auto\">\r\n          <div className=\"flex\">\r\n            <button\r\n              onClick={() => setActiveTab(\"dashboard\")}\r\n              className={`px-4 py-3 font-medium text-sm ${\r\n                activeTab === \"dashboard\"\r\n                  ? \"border-b-2 border-indigo-600 text-indigo-600\"\r\n                  : currentTheme === \"Dark Mode\"\r\n                  ? \"text-gray-300\"\r\n                  : \"text-gray-500\"\r\n              }`}\r\n            >\r\n              Dashboard\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab(\"tasks\")}\r\n              className={`px-4 py-3 font-medium text-sm ${\r\n                activeTab === \"tasks\"\r\n                  ? \"border-b-2 border-indigo-600 text-indigo-600\"\r\n                  : currentTheme === \"Dark Mode\"\r\n                  ? \"text-gray-300\"\r\n                  : \"text-gray-500\"\r\n              }`}\r\n            >\r\n              Tasks\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab(\"analytics\")}\r\n              className={`px-4 py-3 font-medium text-sm ${\r\n                activeTab === \"analytics\"\r\n                  ? \"border-b-2 border-indigo-600 text-indigo-600\"\r\n                  : currentTheme === \"Dark Mode\"\r\n                  ? \"text-gray-300\"\r\n                  : \"text-gray-500\"\r\n              }`}\r\n            >\r\n              Analytics\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab(\"rewards\")}\r\n              className={`px-4 py-3 font-medium text-sm ${\r\n                activeTab === \"rewards\"\r\n                  ? \"border-b-2 border-indigo-600 text-indigo-600\"\r\n                  : currentTheme === \"Dark Mode\"\r\n                  ? \"text-gray-300\"\r\n                  : \"text-gray-500\"\r\n              }`}\r\n            >\r\n              Rewards\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"container mx-auto p-4\">\r\n        {loading ? (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"animate-pulse flex justify-center space-x-2\">\r\n              <div\r\n                className={`w-4 h-4 rounded-full ${\r\n                  currentTheme === \"Dark Mode\"\r\n                    ? \"bg-indigo-500\"\r\n                    : \"bg-indigo-600\"\r\n                }`}\r\n              ></div>\r\n              <div\r\n                className={`w-4 h-4 rounded-full ${\r\n                  currentTheme === \"Dark Mode\"\r\n                    ? \"bg-indigo-500\"\r\n                    : \"bg-indigo-600\"\r\n                }`}\r\n              ></div>\r\n              <div\r\n                className={`w-4 h-4 rounded-full ${\r\n                  currentTheme === \"Dark Mode\"\r\n                    ? \"bg-indigo-500\"\r\n                    : \"bg-indigo-600\"\r\n                }`}\r\n              ></div>\r\n            </div>\r\n            <p className=\"mt-2\">Loading your study data...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {activeTab === \"dashboard\" && (\r\n              <Dashboard\r\n                tasks={tasks}\r\n                studyStats={studyStats}\r\n                aiSuggestion={aiSuggestion}\r\n                getStudyTips={getStudyTips}\r\n                generateSchedule={generateSchedule}\r\n                setActiveTab={setActiveTab}\r\n                toggleTaskComplete={toggleTaskComplete}\r\n                deleteTask={deleteTask}\r\n                currentTheme={currentTheme}\r\n                logStudyHours={logStudyHours}\r\n              />\r\n            )}\r\n\r\n            {activeTab === \"tasks\" && (\r\n              <TaskManager\r\n                tasks={tasks}\r\n                addTask={addTask}\r\n                updateTask={updateTask}\r\n                deleteTask={deleteTask}\r\n                toggleTaskComplete={toggleTaskComplete}\r\n                currentTheme={currentTheme}\r\n              />\r\n            )}\r\n\r\n            {activeTab === \"analytics\" && (\r\n              <Analytics tasks={tasks} currentTheme={currentTheme} />\r\n            )}\r\n\r\n            {activeTab === \"rewards\" && (\r\n              <Rewards\r\n                points={points}\r\n                badges={badges}\r\n                studyStats={studyStats}\r\n                currentTheme={currentTheme}\r\n                onPointsUpdate={handlePointsUpdate}\r\n                onThemeUnlock={handleThemeUnlock}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Layout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}